<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista obowiązków</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin:0;
    padding:0;
    background:#f3f3f3;
    display:flex;
  }
  /* Lewy panel */
  #leftPanel {
    width:250px;
    background:#4caf50;
    color:white;
    padding:20px;
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  #leftPanel select, #leftPanel button {
    padding:10px;
    font-size:14px;
    margin-top:5px;
    width:100%;
    cursor:pointer;
  }
  /* Prawy panel */
  #rightPanel {
    width:250px;
    background:#eee;
    padding:20px;
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  #rightPanel input, #rightPanel button, #rightPanel select {
    padding:10px;
    margin-top:5px;
  }
  /* Główny content */
  #mainContent {
    flex:1;
    padding:20px;
  }
  table {
    width:100%;
    border-collapse:collapse;
    background:white;
  }
  th, td {
    border:1px solid #ddd;
    padding:10px;
    text-align:center;
  }
  th { background:#4caf50; color:white; cursor:pointer; }
  tr:nth-child(even) { background:#f9f9f9; }
  tr:hover { background:#e0f7e9; }
  .doneCheckbox { transform: scale(1.2); }
</style>
</head>
<body>

<!-- Lewy panel -->
<div id="leftPanel">
  <h3>Lista obowiązków</h3>
  <select id="listSelect"></select>
  <button id="newListBtn" style="display:none;">Nowa lista</button>
</div>

<!-- Główny content -->
<div id="mainContent">
  <h2 id="listTitle"></h2>

  <!-- Formularz dodawania wpisów -->
  <form id="taskForm">
    <div id="formFields"></div>
    <button type="submit">Dodaj wpis</button>
  </form>

  <table id="taskTable">
    <thead id="tableHead"></thead>
    <tbody></tbody>
  </table>
</div>

<!-- Prawy panel -->
<div id="rightPanel">
  <h3>Filtry</h3>
  <div id="filterFields"></div>
  <button id="applyFilter">Filtruj</button>
  <button id="resetFilter">Resetuj filtr</button>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
// ====== Konfiguracja Firebase ======
const firebaseConfig = {
  apiKey: "AIzaSyDeH4Ouu8XU09atWJMsawPrEsUCDTd8Pzo",
  authDomain: "obowiazki-domowe-b2312.firebaseapp.com",
  databaseURL: "https://obowiazki-domowe-b2312-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "obowiazki-domowe-b2312",
  storageBucket: "obowiazki-domowe-b2312.firebasestorage.app",
  messagingSenderId: "348397631566",
  appId: "1:348397631566:web:fef9f724dbf737b8cf6b1f"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
let currentList = null;
let isAdmin = true; // dla testu ustaw admin

// ====== Panel wyboru list ======
const listSelect = document.getElementById("listSelect");
const newListBtn = document.getElementById("newListBtn");
function loadLists(){
  db.ref("lists").get().then(snapshot => {
    listSelect.innerHTML = "";
    snapshot.forEach(child => {
      const option = document.createElement("option");
      option.value = child.key;
      option.textContent = child.key;
      listSelect.appendChild(option);
    });
    if(snapshot.exists()){
      currentList = listSelect.value;
      setupForm();
      loadTasks();
    }
  });
}
listSelect.addEventListener("change", ()=>{
  currentList = listSelect.value;
  setupForm();
  loadTasks();
});
if(isAdmin) newListBtn.style.display="bl
